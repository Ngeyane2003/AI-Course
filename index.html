<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn & Earn AI â€” Courses & Bundle</title>
    <!-- Updated with your LIVE Client ID -->
    <script src="https://www.paypal.com/sdk/js?client-id=ECdTb41Q3YVQwgNi6Bz80dzTBhcOzcxGLde30L3n2p01EdIV2jfRgg9LCQEUzKmPEFBvmnS650-rxaak&currency=USD"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Your existing CSS remains exactly the same */
        :root {
            --bg: #0b0f19;
            --bg-alt: #0e1424;
            --text: #e8eefc;
            --muted: #b6c2e2;
            --card: #11182a;
            --accent: #7aa2ff;
            --accent-2: #3b82f6;
            --ring: rgba(122, 162, 255, 0.5);
            --ok: #16a34a;
            --border: rgba(255, 255, 255, 0.08);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        /* ... (all your existing CSS styles remain exactly the same) ... */
        
    </style>
</head>
<body>
    <!-- ====== Main Landing Page ====== -->
    <div id="landing-page">
        <!-- Your existing HTML structure remains exactly the same -->
        
        <!-- ====== Bundle Offer ====== -->
        <section class="section">
            <div class="container">
                <div class="bundle-container">
                    <div class="bundle-header">
                        <h2>Save With Our Course Bundles</h2>
                        <p class="lead">Get multiple courses at a discounted rate</p>
                    </div>
                    <div class="bundle-options">
                        <div class="price-card">
                            <h3>AI Starter Bundle</h3>
                            <p>AI for Everyone + AI for Business</p>
                            <div class="price">$397 <span>one-time payment</span></div>
                            <div class="savings">Save $47 compared to buying separately</div>
                            <ul class="bullets">
                                <li>Both courses</li>
                                <li>Beginner to business level</li>
                                <li>Comprehensive AI knowledge</li>
                                <li>Lifetime access to updates</li>
                            </ul>
                            <div id="paypal-button-starter-bundle" class="paypal-buttons"></div>
                        </div>

                        <div class="price-card highlight">
                            <div class="badge">BEST VALUE</div>
                            <h3>AI Mastery Bundle</h3>
                            <p>All Three Courses: Everyone + Engineering + Business</p>
                            <div class="price">$597 <span>one-time payment</span></div>
                            <div class="savings">Save $144 compared to buying separately</div>
                            <ul class="bullets">
                                <li>All three courses</li>
                                <li>Complete AI education</li>
                                <li>Technical and business perspectives</li>
                                <li>Lifetime access to updates</li>
                                <li>Premium support</li>
                            </ul>
                            <div id="paypal-button-mastery-bundle" class="paypal-buttons"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Rest of your HTML remains exactly the same -->

    </div>

    <!-- ====== Syllabus Pages ====== -->
    
    <!-- AI for Everyone Syllabus -->
    <div id="ai-for-everyone" class="syllabus-page">
        <div class="container">
            <!-- Syllabus content remains the same -->
            <div class="center mt-24">
                <div id="paypal-button-ai-everyone" class="paypal-buttons"></div>
            </div>
        </div>
    </div>

    <!-- AI for Engineering Syllabus -->
    <div id="ai-for-engineering" class="syllabus-page">
        <div class="container">
            <!-- Syllabus content remains the same -->
            <div class="center mt-24">
                <div id="paypal-button-ai-engineering" class="paypal-buttons"></div>
            </div>
        </div>
    </div>

    <!-- AI for Business Syllabus -->
    <div id="ai-for-business" class="syllabus-page">
        <div class="container">
            <!-- Syllabus content remains the same -->
            <div class="center mt-24">
                <div id="paypal-button-ai-business" class="paypal-buttons"></div>
            </div>
        </div>
    </div>

    <script>
        // Mobile nav toggle and other functions remain the same
        
        // Initialize PayPal buttons with SERVER-SIDE API calls
        function initPayPalButtons(courseId) {
            // Clear previous buttons
            document.querySelectorAll('.paypal-buttons').forEach(div => {
                div.innerHTML = '';
            });
            
            // Create new buttons with SERVER-SIDE integration
            let buttonContainer, price, description;
            
            switch(courseId) {
                case 'ai-for-everyone':
                    buttonContainer = 'paypal-button-ai-everyone';
                    price = '197.00';
                    description = 'AI for Everyone Course';
                    break;
                case 'ai-for-engineering':
                    buttonContainer = 'paypal-button-ai-engineering';
                    price = '297.00';
                    description = 'AI for Engineering Course';
                    break;
                case 'ai-for-business':
                    buttonContainer = 'paypal-button-ai-business';
                    price = '247.00';
                    description = 'AI for Business Course';
                    break;
                default:
                    // Bundle buttons with SERVER-SIDE calls
                    paypal.Buttons({
                        createOrder: function(data, actions) {
                            // Call your Vercel serverless function
                            return fetch('/api/create-order', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({
                                    value: '397.00',
                                    description: 'AI Starter Bundle (Everyone + Business)'
                                })
                            }).then(res => res.json())
                                .then(order => order.id);
                        },
                        onApprove: function(data, actions) {
                            // Call your Vercel serverless function
                            return fetch('/api/capture-order', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({
                                    orderID: data.orderID
                                })
                            }).then(res => res.json())
                                .then(details => {
                                    showPaymentSuccess('AI Starter Bundle', details);
                                });
                        }
                    }).render('#paypal-button-starter-bundle');

                    paypal.Buttons({
                        createOrder: function(data, actions) {
                            // Call your Vercel serverless function
                            return fetch('/api/create-order', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({
                                    value: '597.00',
                                    description: 'AI Mastery Bundle (All Three Courses)'
                                })
                            }).then(res => res.json())
                                .then(order => order.id);
                        },
                        onApprove: function(data, actions) {
                            // Call your Vercel serverless function
                            return fetch('/api/capture-order', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({
                                    orderID: data.orderID
                                })
                            }).then(res => res.json())
                                .then(details => {
                                    showPaymentSuccess('AI Mastery Bundle', details);
                                });
                        }
                    }).render('#paypal-button-mastery-bundle');
                    return;
            }
            
            // Individual course buttons with SERVER-SIDE calls
            paypal.Buttons({
                createOrder: function(data, actions) {
                    // Call your Vercel serverless function
                    return fetch('/api/create-order', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            value: price,
                            description: description
                        })
                    }).then(res => res.json())
                        .then(order => order.id);
                },
                onApprove: function(data, actions) {
                    // Call your Vercel serverless function
                    return fetch('/api/capture-order', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            orderID: data.orderID
                        })
                    }).then(res => res.json())
                        .then(details => {
                            showPaymentSuccess(description, details);
                        });
                },
                onError: function(err) {
                    console.error('PayPal error:', err);
                    alert('There was an error with the payment. Please try again.');
                }
            }).render('#' + buttonContainer);
        }

        // Enhanced payment success function
        function showPaymentSuccess(productName, details) {
            const successHTML = `
                <div style="text-align: center; padding: 30px; background: var(--card); border-radius: 16px; margin: 20px 0;">
                    <div style="font-size: 60px; color: var(--ok); margin-bottom: 20px;">âœ“</div>
                    <h2>Payment Successful!</h2>
                    <p>Thank you for purchasing ${productName}.</p>
                    <p>Transaction ID: ${details.id}</p>
                    <p>We've sent a confirmation email to ${details.payer.email_address}.</p>
                    <p>You will receive access to the course within 24 hours.</p>
                    <button class="btn" onclick="showLandingPage()" style="margin-top: 20px;">
                        <i class="fas fa-home"></i> Return to Home
                    </button>
                </div>
            `;
            
            // Replace all PayPal buttons with success message
            document.querySelectorAll('.paypal-buttons').forEach(div => {
                div.innerHTML = successHTML;
            });
        }

        // Initialize buttons when page loads
        initPayPalButtons();

        // ... rest of your JavaScript remains the same
    </script>
</body>
</html>
